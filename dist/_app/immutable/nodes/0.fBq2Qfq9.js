import{s as H,h as g,j as z,e as L,P as J,k as b,l as W,d as _,m as R,E as h,z as k,i as C,B as T,o as X,w as N,x as I,y as q,G,A as K,Q,c as Y,u as Z,g as $,a as ee}from"../chunks/B3U6TAxr.js";import{S as te,i as re,t as v,a as y,c as D,h as S,g as U}from"../chunks/Cp1oxllw.js";import{w as ne,o as A,p as O,q as P}from"../chunks/DBxwzyNf.js";import{i as oe}from"../chunks/CTYo6Ux6.js";import{c as ie}from"../chunks/Bx8JZE7Z.js";import{f as j}from"../chunks/BiGeYxq3.js";const se=!0,ve=Object.freeze(Object.defineProperty({__proto__:null,prerender:se},Symbol.toStringTag,{value:"Module"}));/*! js-cookie v3.0.5 | MIT */function E(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)n[o]=i[o]}return n}var ae={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function x(n,t){function i(e,s,r){if(!(typeof document>"u")){r=E({},t,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var u in r)r[u]&&(a+="; "+u,r[u]!==!0&&(a+="="+r[u].split(";")[0]));return document.cookie=e+"="+n.write(s,e)+a}}function o(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var s=document.cookie?document.cookie.split("; "):[],r={},a=0;a<s.length;a++){var u=s[a].split("="),f=u.slice(1).join("=");try{var w=decodeURIComponent(u[0]);if(r[w]=n.read(f,w),e===w)break}catch{}}return e?r[e]:r}}return Object.create({set:i,get:o,remove:function(e,s){i(e,"",E({},s,{expires:-1}))},withAttributes:function(e){return x(this.converter,E({},this.attributes,e))},withConverter:function(e){return x(E({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(n)}})}var B=x(ae,{path:"/"});async function le(){try{let n=await ie()("https://api.uugpt.com/site_version",{method:"GET",credentials:"include"});return n.ok?await n.json():1}catch{return 1}}function V(n){let t,i,o,e,s;return{c(){t=g("div"),i=g("span"),o=N(n[2]),this.h()},l(r){t=b(r,"DIV",{class:!0,role:!0,style:!0});var a=I(t);i=b(a,"SPAN",{class:!0});var u=I(i);o=q(u,n[2]),u.forEach(_),a.forEach(_),this.h()},h(){h(i,"class","block sm:inline"),h(t,"class","z-50 fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-md transition"),h(t,"role","alert"),G(t,"z-index","2000")},m(r,a){C(r,t,a),k(t,i),k(i,o),s=!0},p(r,a){(!s||a&4)&&K(o,r[2])},i(r){s||(r&&Q(()=>{s&&(e||(e=S(t,j,{y:20,duration:500},!0)),e.run(1))}),s=!0)},o(r){r&&(e||(e=S(t,j,{y:20,duration:500},!1)),e.run(0)),s=!1},d(r){r&&_(t),r&&e&&e.end()}}}function F(n){let t,i,o,e,s;return{c(){t=g("div"),i=g("span"),o=N(n[2]),this.h()},l(r){t=b(r,"DIV",{class:!0,role:!0,style:!0});var a=I(t);i=b(a,"SPAN",{class:!0});var u=I(i);o=q(u,n[2]),u.forEach(_),a.forEach(_),this.h()},h(){h(i,"class","block sm:inline"),h(t,"class","z-50 fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-md"),h(t,"role","alert"),G(t,"z-index","2000")},m(r,a){C(r,t,a),k(t,i),k(i,o),s=!0},p(r,a){(!s||a&4)&&K(o,r[2])},i(r){s||(r&&Q(()=>{s&&(e||(e=S(t,j,{y:20,duration:500},!0)),e.run(1))}),s=!0)},o(r){r&&(e||(e=S(t,j,{y:20,duration:500},!1)),e.run(0)),s=!1},d(r){r&&_(t),r&&e&&e.end()}}}function M(n){let t;const i=n[5].default,o=Y(i,n,n[4],null);return{c(){o&&o.c()},l(e){o&&o.l(e)},m(e,s){o&&o.m(e,s),t=!0},p(e,s){o&&o.p&&(!t||s&16)&&Z(o,i,e,e[4],t?ee(i,e[4],s,null):$(e[4]),null)},i(e){t||(v(o,e),t=!0)},o(e){y(o,e),t=!1},d(e){o&&o.d(e)}}}function fe(n){let t,i,o,e,s=`// 在 DOM 加载时立即监听\r
    window.addEventListener('beforeinstallprompt', (e) => {\r
      e.preventDefault();\r
      window.self_promp = e;\r
    });`,r,a,u,f,w,c=n[1]&&V(n),d=n[3]&&F(n),p=n[0]&&M(n);return{c(){t=g("link"),i=g("meta"),o=g("link"),e=g("script"),e.textContent=s,r=z(),c&&c.c(),a=z(),d&&d.c(),u=z(),p&&p.c(),f=L(),this.h()},l(l){const m=J("svelte-oqelg5",document.head);t=b(m,"LINK",{rel:!0,href:!0}),i=b(m,"META",{name:!0,content:!0}),o=b(m,"LINK",{rel:!0,href:!0,type:!0}),e=b(m,"SCRIPT",{"data-svelte-h":!0}),W(e)!=="svelte-14rytc4"&&(e.textContent=s),m.forEach(_),r=R(l),c&&c.l(l),a=R(l),d&&d.l(l),u=R(l),p&&p.l(l),f=L(),this.h()},h(){h(t,"rel","manifest"),h(t,"href","/manifest.json?v=v1.0.2"),h(i,"name","theme-color"),h(i,"content","#e5e7eb"),h(o,"rel","icon"),h(o,"href","/favicon.ico"),h(o,"type","image/x-icon")},m(l,m){k(document.head,t),k(document.head,i),k(document.head,o),k(document.head,e),C(l,r,m),c&&c.m(l,m),C(l,a,m),d&&d.m(l,m),C(l,u,m),p&&p.m(l,m),C(l,f,m),w=!0},p(l,[m]){l[1]?c?(c.p(l,m),m&2&&v(c,1)):(c=V(l),c.c(),v(c,1),c.m(a.parentNode,a)):c&&(U(),y(c,1,1,()=>{c=null}),D()),l[3]?d?(d.p(l,m),m&8&&v(d,1)):(d=F(l),d.c(),v(d,1),d.m(u.parentNode,u)):d&&(U(),y(d,1,1,()=>{d=null}),D()),l[0]?p?(p.p(l,m),m&1&&v(p,1)):(p=M(l),p.c(),v(p,1),p.m(f.parentNode,f)):p&&(U(),y(p,1,1,()=>{p=null}),D())},i(l){w||(v(c),v(d),v(p),w=!0)},o(l){y(c),y(d),y(p),w=!1},d(l){l&&(_(r),_(a),_(u),_(f)),_(t),_(i),_(o),_(e),c&&c.d(l),d&&d.d(l),p&&p.d(l)}}}function ce(n,t,i){let o,e,s;T(n,A,f=>i(1,o=f)),T(n,O,f=>i(2,e=f)),T(n,P,f=>i(3,s=f));let{$$slots:r={},$$scope:a}=t,u=!1;return X(async()=>{let f=await le();if(B.get("version")!=f){B.set("version",f,{path:"/"}),await new Promise(d=>setTimeout(d,500));let c=new URL(window.location.href);c.searchParams.set("v",f),window.location.href=c.toString()}await oe(),await ne(),i(0,u=!0)}),A.subscribe(f=>{f&&setTimeout(()=>{A.set(!1),O.set("")},5e3)}),P.subscribe(f=>{f&&setTimeout(()=>{P.set(!1),O.set("")},5e3)}),n.$$set=f=>{"$$scope"in f&&i(4,a=f.$$scope)},[u,o,e,s,a,r]}class we extends te{constructor(t){super(),re(this,t,ce,fe,H,{})}}export{we as component,ve as universal};
