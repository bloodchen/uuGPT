import{a as et,e as v,t as J,b as O,c as k,d as D,f as W,g as d,h as U,y as i,F,j as L,k as m,H as z,l as X,n as ce,r as me,m as _e,X as ot,A as we,z as he,G as Ee,Y as ct,x as ut,I as ft,w as dt,J as fe,K as pt,v as Ge}from"../chunks/scheduler.CRQEjDpn.js";import{S as tt,i as lt,f as _t,b as Ie,d as Se,m as Te,t as j,a as Z,c as de,e as De,g as pe}from"../chunks/index.DPd6IxDO.js";import{D as st,$ as at,s as rt,G as ht,m as mt,H as Ne,S as gt,a as ie,i as bt,C as vt,E as kt,L as wt,b as Et,P as yt,c as It,d as St,e as Pe,l as Be,g as Tt,f as He,h as Dt,j as Mt,n as Oe,k as Ct,o as Vt,p as At,q as Ue,r as Nt,t as Pt,W as Bt,B as Re,w as Lt,R as Gt,F as Ht,x as qe,y as je,z as Ke,A as Ze,u as it,v as ye}from"../chunks/remapping.umd.Bhrie2HU.js";const Ot="data:image/svg+xml,%3csvg%20id='aisettings'%20xmlns='http://www.w3.org/2000/svg'%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%3e%3cpath%20id='路径_3870'%20data-name='路径%203870'%20d='M77.5,705.5H70.938a2,2,0,0,0-3.875,0H64.5a.5.5,0,0,0,0,1h2.563a2,2,0,0,0,3.875,0H77.5a.5.5,0,0,0,0-1ZM69,707.016A1.016,1.016,0,1,1,70.016,706,1.016,1.016,0,0,1,69,707.016Z'%20transform='translate(-64%20-694)'%20fill='%234a928c'/%3e%3cpath%20id='路径_3871'%20data-name='路径%203871'%20d='M77.5,385.5H74.938a2,2,0,0,0-3.875,0H64.5a.5.5,0,1,0,0,1h6.563a2,2,0,0,0,3.875,0H77.5a.5.5,0,0,0,0-1ZM73,387.016A1.016,1.016,0,1,1,74.016,386,1.016,1.016,0,0,1,73,387.016Z'%20transform='translate(-64%20-379)'%20fill='%234a928c'/%3e%3cpath%20id='路径_3872'%20data-name='路径%203872'%20d='M64.5,66.5h2.563a2,2,0,0,0,3.875,0H77.5a.5.5,0,0,0,0-1H70.938a2,2,0,0,0-3.875,0H64.5a.5.5,0,0,0,0,1ZM69,64.984A1.016,1.016,0,1,1,67.984,66,1.016,1.016,0,0,1,69,64.984Z'%20transform='translate(-64%20-64)'%20fill='%234a928c'/%3e%3c/svg%3e";function Ut(s){let e,l,t=(s[0]===""?s[1]("topbar.title"):s[0])+"",a,r,p,n,u,o,g,w,_=s[1]("topbar.clearConversation",{default:"Clear"})+"",y,T,c,h,f,M,E,I,A=s[1]("topbar.setting")+"",C,N,q;return{c(){e=v("div"),l=v("div"),a=J(t),r=O(),p=v("div"),n=v("button"),u=v("img"),g=O(),w=v("span"),y=J(_),T=O(),c=v("button"),h=v("img"),E=O(),I=v("span"),C=J(A),this.h()},l(V){e=k(V,"DIV",{class:!0});var H=D(e);l=k(H,"DIV",{class:!0});var Q=D(l);a=W(Q,t),Q.forEach(d),r=U(H),p=k(H,"DIV",{class:!0});var P=D(p);n=k(P,"BUTTON",{class:!0});var x=D(n);u=k(x,"IMG",{class:!0,alt:!0,src:!0}),g=U(x),w=k(x,"SPAN",{class:!0});var se=D(w);y=W(se,_),se.forEach(d),x.forEach(d),T=U(P),c=k(P,"BUTTON",{class:!0});var ee=D(c);h=k(ee,"IMG",{class:!0,alt:!0,src:!0}),E=U(ee),I=k(ee,"SPAN",{class:!0});var B=D(I);C=W(B,A),B.forEach(d),ee.forEach(d),P.forEach(d),H.forEach(d),this.h()},h(){i(l,"class","font-bold pt-[0.5em] text-center overflow-hidden h-10 text-ellipsis whitespace-nowrap"),i(u,"class","icon-small"),i(u,"alt","clear"),F(u.src,o=st)||i(u,"src",o),i(w,"class","btn-text"),i(n,"class","btn-custom"),i(h,"class","icon-small"),i(h,"alt",f=s[1]("topbar.setting")),F(h.src,M=Ot)||i(h,"src",M),i(I,"class","btn-text"),i(c,"class","btn-custom"),i(p,"class","flex gap-2 items-center"),i(e,"class","bg-primary text-black/90 px-3 flex justify-between shrink grow-0 max-h-16 topbar")},m(V,H){L(V,e,H),m(e,l),m(l,a),m(e,r),m(e,p),m(p,n),m(n,u),m(n,g),m(n,w),m(w,y),m(p,T),m(p,c),m(c,h),m(c,E),m(c,I),m(I,C),N||(q=[z(n,"click",s[3]),z(c,"click",s[2])],N=!0)},p(V,[H]){H&3&&t!==(t=(V[0]===""?V[1]("topbar.title"):V[0])+"")&&X(a,t),H&2&&_!==(_=V[1]("topbar.clearConversation",{default:"Clear"})+"")&&X(y,_),H&2&&f!==(f=V[1]("topbar.setting"))&&i(h,"alt",f),H&2&&A!==(A=V[1]("topbar.setting")+"")&&X(C,A)},i:ce,o:ce,d(V){V&&d(e),N=!1,me(q)}}}function Rt(s,e,l){let t;_e(s,at,u=>l(1,t=u));const a=ot();function r(){rt.set(!0)}function p(){a("new-chat")}let{conversation_title:n}=e;return s.$$set=u=>{"conversation_title"in u&&l(0,n=u.conversation_title)},[n,t,r,p]}class qt extends tt{constructor(e){super(),lt(this,e,Rt,Ut,et,{conversation_title:0})}}const ze="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20width='800px'%20height='800px'%20viewBox='-5.76%20-5.76%2043.52%2043.52'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3crect%20x='-5.76'%20y='-5.76'%20width='43.52'%20height='43.52'%20rx='21.76'%20fill='%233caa97'%20strokewidth='0'/%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3ctitle%3euser%3c/title%3e%3cpath%20d='M4%2028q0%200.832%200.576%201.44t1.44%200.576h20q0.8%200%201.408-0.576t0.576-1.44q0-1.44-0.672-2.912t-1.76-2.624-2.496-2.144-2.88-1.504q1.76-1.088%202.784-2.912t1.024-3.904v-1.984q0-3.328-2.336-5.664t-5.664-2.336-5.664%202.336-2.336%205.664v1.984q0%202.112%201.024%203.904t2.784%202.912q-1.504%200.544-2.88%201.504t-2.496%202.144-1.76%202.624-0.672%202.912z'/%3e%3c/g%3e%3c/svg%3e";function Fe(s,e,l){const t=s.slice();return t[44]=e[l],t[46]=l,t}function Je(s){let e,l;return e=new gt({}),e.$on("settings-changed",tl),{c(){Ie(e.$$.fragment)},l(t){Se(e.$$.fragment,t)},m(t,a){Te(e,t,a),l=!0},p:ce,i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){De(e,t)}}}function jt(s){let e,l,t=s[8]("app.noConversation")+"",a;return{c(){e=v("div"),l=v("p"),a=J(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var p=D(e);l=k(p,"P",{});var n=D(l);a=W(n,t),n.forEach(d),p.forEach(d),this.h()},h(){i(e,"class","flex justify-center items-center h-full")},m(r,p){L(r,e,p),m(e,l),m(l,a)},p(r,p){p[0]&256&&t!==(t=r[8]("app.noConversation")+"")&&X(a,t)},i:ce,o:ce,d(r){r&&d(e)}}}function Kt(s){let e,l,t,a=Ue(s[7]),r=[];for(let n=0;n<a.length;n+=1)r[n]=$e(Fe(s,a,n));const p=n=>Z(r[n],1,1,()=>{r[n]=null});return{c(){e=v("div"),l=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=k(n,"DIV",{class:!0});var u=D(e);l=k(u,"DIV",{class:!0});var o=D(l);for(let g=0;g<r.length;g+=1)r[g].l(o);o.forEach(d),u.forEach(d),this.h()},h(){i(l,"class","w-full"),i(e,"class","flex flex-col pt-2 grow max-w-full px-0 sm:px-5")},m(n,u){L(n,e,u),m(e,l);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(l,null);t=!0},p(n,u){if(u[0]&1035748){a=Ue(n[7]);let o;for(o=0;o<a.length;o+=1){const g=Fe(n,a,o);r[o]?(r[o].p(g,u),j(r[o],1)):(r[o]=$e(g),r[o].c(),j(r[o],1),r[o].m(l,null))}for(pe(),o=a.length;o<r.length;o+=1)p(o);de()}},i(n){if(!t){for(let u=0;u<a.length;u+=1)j(r[u]);t=!0}},o(n){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)Z(r[u]);t=!1},d(n){n&&d(e),pt(r,n)}}}function We(s){let e,l,t,a,r,p,n,u,o,g,w,_;function y(E,I){return E[44].role==="assistant"?zt:Zt}let T=y(s),c=T(s);const h=[Jt,Ft],f=[];function M(E,I){return E[5]===E[46]?0:1}return o=M(s),g=f[o]=h[o](s),{c(){e=v("div"),l=v("div"),t=v("div"),a=v("img"),p=O(),n=v("div"),c.c(),u=O(),g.c(),w=O(),this.h()},l(E){e=k(E,"DIV",{class:!0});var I=D(e);l=k(I,"DIV",{class:!0});var A=D(l);t=k(A,"DIV",{});var C=D(t);a=k(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(d),p=U(A),n=k(A,"DIV",{class:!0});var N=D(n);c.l(N),N.forEach(d),A.forEach(d),u=U(I),g.l(I),w=U(I),I.forEach(d),this.h()},h(){F(a.src,r=s[44].role==="user"?ze:Re)||i(a,"src",r),i(a,"alt","Profile"),i(a,"class","w-[1.5rem] h-[1.5rem]"),i(n,"class","relative ml-2 font-bold"),i(l,"class","profile-picture flex align-middle"),i(e,"class","message relative inline-block bg-primary px-3 mt-3 flex flex-col transition-all duration-200 ease-in-out")},m(E,I){L(E,e,I),m(e,l),m(l,t),m(t,a),m(l,p),m(l,n),c.m(n,null),m(e,u),f[o].m(e,null),m(e,w),_=!0},p(E,I){(!_||I[0]&128&&!F(a.src,r=E[44].role==="user"?ze:Re))&&i(a,"src",r),T===(T=y(E))&&c?c.p(E,I):(c.d(1),c=T(E),c&&(c.c(),c.m(n,null)));let A=o;o=M(E),o===A?f[o].p(E,I):(pe(),Z(f[A],1,1,()=>{f[A]=null}),de(),g=f[o],g?g.p(E,I):(g=f[o]=h[o](E),g.c()),j(g,1),g.m(e,w))},i(E){_||(j(g),_=!0)},o(E){Z(g),_=!1},d(E){E&&d(e),c.d(),f[o].d()}}}function Zt(s){let e=s[8]("app.username")+"",l;return{c(){l=J(e)},l(t){l=W(t,e)},m(t,a){L(t,l,a)},p(t,a){a[0]&256&&e!==(e=t[8]("app.username")+"")&&X(l,e)},d(t){t&&d(l)}}}function zt(s){let e=s[8]("app.assistantname")+"",l;return{c(){l=J(e)},l(t){l=W(t,e)},m(t,a){L(t,l,a)},p(t,a){a[0]&256&&e!==(e=t[8]("app.assistantname")+"")&&X(l,e)},d(t){t&&d(l)}}}function Ft(s){let e,l,t,a,r,p,n,u,o,g;const w=[Xt,Wt],_=[];function y(f,M){return f[44].role==="assistant"?0:1}l=y(s),t=_[l]=w[l](s);let T=s[44].role==="assistant"&&Xe(s),c=s[44].role==="user"&&Ye(s),h=s[44].role==="assistant"&&Qe(s);return{c(){e=v("div"),t.c(),a=O(),r=v("div"),p=v("div"),T&&T.c(),n=O(),c&&c.c(),u=O(),o=v("div"),h&&h.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var M=D(e);t.l(M),M.forEach(d),a=U(f),r=k(f,"DIV",{class:!0});var E=D(r);p=k(E,"DIV",{class:!0});var I=D(p);T&&T.l(I),n=U(I),c&&c.l(I),I.forEach(d),u=U(E),o=k(E,"DIV",{class:!0});var A=D(o);h&&h.l(A),A.forEach(d),E.forEach(d),this.h()},h(){i(e,"class","message-display mt-2 transition-all duration-200 ease-in-out"),i(p,"class","flex space-x-2"),i(o,"class","flex space-x-2"),i(r,"class","toolbelt flex mb-2 tools justify-between")},m(f,M){L(f,e,M),_[l].m(e,null),L(f,a,M),L(f,r,M),m(r,p),T&&T.m(p,null),m(p,n),c&&c.m(p,null),m(r,u),m(r,o),h&&h.m(o,null),g=!0},p(f,M){let E=l;l=y(f),l===E?_[l].p(f,M):(pe(),Z(_[E],1,1,()=>{_[E]=null}),de(),t=_[l],t?t.p(f,M):(t=_[l]=w[l](f),t.c()),j(t,1),t.m(e,null)),f[44].role==="assistant"?T?T.p(f,M):(T=Xe(f),T.c(),T.m(p,n)):T&&(T.d(1),T=null),f[44].role==="user"?c?c.p(f,M):(c=Ye(f),c.c(),c.m(p,null)):c&&(c.d(1),c=null),f[44].role==="assistant"?h?h.p(f,M):(h=Qe(f),h.c(),h.m(o,null)):h&&(h.d(1),h=null)},i(f){g||(j(t),g=!0)},o(f){Z(t),g=!1},d(f){f&&(d(e),d(a),d(r)),_[l].d(),T&&T.d(),c&&c.d(),h&&h.d()}}}function Jt(s){let e,l,t,a,r=s[8]("app.cancel")+"",p,n,u,o=s[8]("app.submit")+"",g,w,_,y;function T(){return s[24](s[46])}return{c(){e=v("textarea"),l=O(),t=v("div"),a=v("button"),p=J(r),n=O(),u=v("button"),g=J(o),this.h()},l(c){e=k(c,"TEXTAREA",{class:!0,style:!0}),D(e).forEach(d),l=U(c),t=k(c,"DIV",{class:!0});var h=D(t);a=k(h,"BUTTON",{class:!0});var f=D(a);p=W(f,r),f.forEach(d),n=U(h),u=k(h,"BUTTON",{class:!0});var M=D(u);g=W(M,o),M.forEach(d),h.forEach(d),this.h()},h(){i(e,"class","message-edit-textarea mt-2 bg-secondary p-2 mx-2 border-2 border-themegreyborder resize-none focus:outline-2 focus:outline-themegreen shadow rounded-lg transition-all duration-200 ease-in-out"),e.autofocus=!0,he(e,"height","6.5rem"),he(e,"overflow-y","auto"),i(a,"class","cancel-edit border-2 border-themegreyborder bg-themegreyhover hover:bg-secondary rounded-lg px-3 py-1 mr-2"),i(u,"class",w="submit-edit rounded-lg px-3 py-1 mr-2 text-white bg-themegreen "+(s[10]?"bg-themegreylight text-white cursor-not-allowed":"hover:bg-themegreenhover hover:text-white")),u.disabled=s[10],i(t,"class","flex place-content-center mt-4")},m(c,h){L(c,e,h),s[21](e),Ee(e,s[6]),L(c,l,h),L(c,t,h),m(t,a),m(a,p),m(t,n),m(t,u),m(u,g),e.focus(),_||(y=[z(e,"input",s[22]),z(e,"input",nt),z(a,"click",s[23]),z(u,"click",T)],_=!0)},p(c,h){s=c,h[0]&64&&Ee(e,s[6]),h[0]&256&&r!==(r=s[8]("app.cancel")+"")&&X(p,r),h[0]&256&&o!==(o=s[8]("app.submit")+"")&&X(g,o),h[0]&1024&&w!==(w="submit-edit rounded-lg px-3 py-1 mr-2 text-white bg-themegreen "+(s[10]?"bg-themegreylight text-white cursor-not-allowed":"hover:bg-themegreenhover hover:text-white"))&&i(u,"class",w),h[0]&1024&&(u.disabled=s[10])},i:ce,o:ce,d(c){c&&(d(e),d(l),d(t)),s[21](null),_=!1,me(y)}}}function Wt(s){let e,l;return e=new it({props:{renderers:s[11],source:ye(s[44].content.toString())}}),{c(){Ie(e.$$.fragment)},l(t){Se(e.$$.fragment,t)},m(t,a){Te(e,t,a),l=!0},p(t,a){const r={};a[0]&128&&(r.source=ye(t[44].content.toString())),e.$set(r)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){De(e,t)}}}function Xt(s){let e,l;return e=new it({props:{renderers:s[11],source:ye(s[44].content.toString())}}),{c(){Ie(e.$$.fragment)},l(t){Se(e.$$.fragment,t)},m(t,a){Te(e,t,a),l=!0},p(t,a){const r={};a[0]&128&&(r.source=ye(t[44].content.toString())),e.$set(r)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){De(e,t)}}}function Xe(s){let e,l,t,a,r,p,n=s[8]("app.copy")+"",u,o,g,w,_,y,T,c,h=s[8]("app.retry")+"",f,M,E,I,A,C,N,q,V=s[8]("app.delete")+"",H,Q,P;function x(){return s[25](s[44])}function se(){return s[26](s[46])}function ee(){return s[27](s[46])}return{c(){e=v("button"),l=v("img"),r=O(),p=v("span"),u=J(n),o=O(),g=v("button"),w=v("img"),T=O(),c=v("span"),f=J(h),M=O(),E=v("button"),I=v("img"),N=O(),q=v("span"),H=J(V),this.h()},l(B){e=k(B,"BUTTON",{class:!0});var R=D(e);l=k(R,"IMG",{class:!0,alt:!0,src:!0}),r=U(R),p=k(R,"SPAN",{class:!0});var ne=D(p);u=W(ne,n),ne.forEach(d),R.forEach(d),o=U(B),g=k(B,"BUTTON",{class:!0});var te=D(g);w=k(te,"IMG",{class:!0,alt:!0,src:!0}),T=U(te),c=k(te,"SPAN",{class:!0});var Y=D(c);f=W(Y,h),Y.forEach(d),te.forEach(d),M=U(B),E=k(B,"BUTTON",{class:!0});var S=D(E);I=k(S,"IMG",{class:!0,alt:!0,src:!0}),N=U(S),q=k(S,"SPAN",{class:!0});var G=D(q);H=W(G,V),G.forEach(d),S.forEach(d),this.h()},h(){i(l,"class","copy-icon"),i(l,"alt",t=s[8]("app.copy")),F(l.src,a=Lt)||i(l,"src",a),i(p,"class","btn-text"),i(e,"class","copyButton btn-custom"),i(w,"class",""),i(w,"alt",_=s[8]("app.retry")),F(w.src,y=Gt)||i(w,"src",y),i(c,"class","btn-text"),i(g,"class","copyButton btn-custom"),i(I,"class","delete-icon"),i(I,"alt",A=s[8]("app.delete")),F(I.src,C=st)||i(I,"src",C),i(q,"class","btn-text"),i(E,"class","deleteButton btn-custom")},m(B,R){L(B,e,R),m(e,l),m(e,r),m(e,p),m(p,u),L(B,o,R),L(B,g,R),m(g,w),m(g,T),m(g,c),m(c,f),L(B,M,R),L(B,E,R),m(E,I),m(E,N),m(E,q),m(q,H),Q||(P=[z(e,"click",x),z(g,"click",se),z(E,"click",ee)],Q=!0)},p(B,R){s=B,R[0]&256&&t!==(t=s[8]("app.copy"))&&i(l,"alt",t),R[0]&256&&n!==(n=s[8]("app.copy")+"")&&X(u,n),R[0]&256&&_!==(_=s[8]("app.retry"))&&i(w,"alt",_),R[0]&256&&h!==(h=s[8]("app.retry")+"")&&X(f,h),R[0]&256&&A!==(A=s[8]("app.delete"))&&i(I,"alt",A),R[0]&256&&V!==(V=s[8]("app.delete")+"")&&X(H,V)},d(B){B&&(d(e),d(o),d(g),d(M),d(E)),Q=!1,me(P)}}}function Ye(s){let e,l,t,a,r,p,n=s[8]("app.edit")+"",u,o,g;function w(){return s[28](s[46])}return{c(){e=v("button"),l=v("img"),r=O(),p=v("span"),u=J(n),this.h()},l(_){e=k(_,"BUTTON",{class:!0});var y=D(e);l=k(y,"IMG",{class:!0,alt:!0,src:!0}),r=U(y),p=k(y,"SPAN",{class:!0});var T=D(p);u=W(T,n),T.forEach(d),y.forEach(d),this.h()},h(){i(l,"class","edit-icon"),i(l,"alt",t=s[8]("app.edit")),F(l.src,a=Ht)||i(l,"src",a),i(p,"class","btn-text"),i(e,"class","btn-custom")},m(_,y){L(_,e,y),m(e,l),m(e,r),m(e,p),m(p,u),o||(g=z(e,"click",w),o=!0)},p(_,y){s=_,y[0]&256&&t!==(t=s[8]("app.edit"))&&i(l,"alt",t),y[0]&256&&n!==(n=s[8]("app.edit")+"")&&X(u,n)},d(_){_&&d(e),o=!1,g()}}}function Qe(s){let e,l,t,a,r,p,n=s[8]("app.like")+"",u,o,g,w,_,y,T,c,h=s[8]("app.dislike")+"",f,M,E;function I(){return s[29](s[46])}function A(){return s[30](s[46])}return{c(){e=v("button"),l=v("img"),r=O(),p=v("span"),u=J(n),o=O(),g=v("button"),w=v("img"),T=O(),c=v("span"),f=J(h),this.h()},l(C){e=k(C,"BUTTON",{id:!0,class:!0});var N=D(e);l=k(N,"IMG",{alt:!0,src:!0,class:!0}),r=U(N),p=k(N,"SPAN",{class:!0});var q=D(p);u=W(q,n),q.forEach(d),N.forEach(d),o=U(C),g=k(C,"BUTTON",{id:!0,class:!0});var V=D(g);w=k(V,"IMG",{alt:!0,src:!0,class:!0}),T=U(V),c=k(V,"SPAN",{class:!0});var H=D(c);f=W(H,h),H.forEach(d),V.forEach(d),this.h()},h(){i(l,"alt","like"),F(l.src,t=s[44].isLiked?qe:je)||i(l,"src",t),i(l,"class",a=s[44].isLiked?"small-rotate-animation":""),i(p,"class","btn-text"),i(e,"id","likeBtn"),i(e,"class","btn-custom"),i(w,"alt","dislike"),F(w.src,_=s[44].isDisliked?Ke:Ze)||i(w,"src",_),i(w,"class",y=s[44].isDisliked?"small-rotate-animation":""),i(c,"class","btn-text"),i(g,"id","dislikeBtn"),i(g,"class","btn-custom")},m(C,N){L(C,e,N),m(e,l),m(e,r),m(e,p),m(p,u),L(C,o,N),L(C,g,N),m(g,w),m(g,T),m(g,c),m(c,f),M||(E=[z(e,"click",I),z(g,"click",A)],M=!0)},p(C,N){s=C,N[0]&128&&!F(l.src,t=s[44].isLiked?qe:je)&&i(l,"src",t),N[0]&128&&a!==(a=s[44].isLiked?"small-rotate-animation":"")&&i(l,"class",a),N[0]&256&&n!==(n=s[8]("app.like")+"")&&X(u,n),N[0]&128&&!F(w.src,_=s[44].isDisliked?Ke:Ze)&&i(w,"src",_),N[0]&128&&y!==(y=s[44].isDisliked?"small-rotate-animation":"")&&i(w,"class",y),N[0]&256&&h!==(h=s[8]("app.dislike")+"")&&X(f,h)},d(C){C&&(d(e),d(o),d(g)),M=!1,me(E)}}}function $e(s){let e,l,t=s[44].role!=="system"&&We(s);return{c(){t&&t.c(),e=Ge()},l(a){t&&t.l(a),e=Ge()},m(a,r){t&&t.m(a,r),L(a,e,r),l=!0},p(a,r){a[44].role!=="system"?t?(t.p(a,r),r[0]&128&&j(t,1)):(t=We(a),t.c(),j(t,1),t.m(e.parentNode,e)):t&&(pe(),Z(t,1,1,()=>{t=null}),de())},i(a){l||(j(t),l=!0)},o(a){Z(t),l=!1},d(a){a&&d(e),t&&t.d(a)}}}function Yt(s){let e,l;return{c(){e=v("img"),this.h()},l(t){e=k(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){F(e.src,l=Nt)||i(e,"src",l),i(e,"alt","send"),i(e,"class","min-w-[32px] w-[32px]")},m(t,a){L(t,e,a)},d(t){t&&d(e)}}}function Qt(s){let e,l;return{c(){e=v("img"),this.h()},l(t){e=k(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){F(e.src,l=Pt)||i(e,"src",l),i(e,"alt","send"),i(e,"class","min-w-[32px] w-[32px]")},m(t,a){L(t,e,a)},d(t){t&&d(e)}}}function $t(s){let e,l;return{c(){e=v("img"),this.h()},l(t){e=k(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){F(e.src,l=Bt)||i(e,"src",l),i(e,"alt","wait"),i(e,"class","min-w-[32px] w-[32px]")},m(t,a){L(t,e,a)},d(t){t&&d(e)}}}function xt(s){let e,l=s[8]("app.title")+"",t,a,r,p,n,u,o,g,w,_,y,T,c,h,f,M,E,I,A,C,N,q,V,H,Q,P=s[9]&&Je();function x(S){s[20](S)}let se={};s[4]!==void 0&&(se.conversation_title=s[4]),u=new qt({props:se}),we.push(()=>_t(u,"conversation_title",x)),u.$on("new-chat",ht);const ee=[Kt,jt],B=[];function R(S,G){return S[7].length>0?0:1}_=R(s),y=B[_]=ee[_](s);function ne(S,G){return G[0]&1&&(N=null),S[10]?$t:(N==null&&(N=S[0].trim().length===0),N?Qt:Yt)}let te=ne(s,[-1,-1]),Y=te(s);return{c(){e=v("title"),t=J(l),a=O(),P&&P.c(),r=O(),p=v("main"),n=v("div"),Ie(u.$$.fragment),g=O(),w=v("div"),y.c(),T=O(),c=v("div"),h=v("div"),f=v("textarea"),E=O(),I=v("div"),A=v("div"),C=v("button"),Y.c(),this.h()},l(S){e=k(S,"TITLE",{});var G=D(e);t=W(G,l),G.forEach(d),a=U(S),P&&P.l(S),r=U(S),p=k(S,"MAIN",{class:!0});var oe=D(p);n=k(oe,"DIV",{class:!0});var $=D(n);Se(u.$$.fragment,$),g=U($),w=k($,"DIV",{class:!0});var ge=D(w);y.l(ge),ge.forEach(d),T=U($),c=k($,"DIV",{class:!0});var be=D(c);h=k(be,"DIV",{class:!0});var ue=D(h);f=k(ue,"TEXTAREA",{class:!0,placeholder:!0,style:!0}),D(f).forEach(d),E=U(ue),I=k(ue,"DIV",{class:!0});var ve=D(I);A=k(ve,"DIV",{class:!0});var Me=D(A);C=k(Me,"BUTTON",{class:!0});var b=D(C);Y.l(b),b.forEach(d),Me.forEach(d),ve.forEach(d),ue.forEach(d),be.forEach(d),$.forEach(d),oe.forEach(d),this.h()},h(){i(w,"class","flex bg-primary overflow-y-auto overflow-x-hidden justify-center grow"),i(f,"class","w-full min-h-[6.5rem] h-24 rounded-lg p-2 pb-11 mx-1 border-2 border-themegreyborder resize-none focus:outline-2 focus:outline-themegreen shadow-xl"),i(f,"placeholder",M=s[8]("app.textareaPlaceholder")),f.autofocus=!0,he(f,"height","6.5rem"),he(f,"overflow-y","auto"),he(f,"overflow","visible",1),i(C,"class","file-label bg-primary rounded cursor-pointer hover:themegray transition-colors"),C.disabled=q=!s[10]&&!s[0].trim().length,i(A,"class","flex send-btn-set flex-end items-center gap-1"),i(I,"class","absolute textarea-btn-set flex justify-between bg-primary pb-1"),i(h,"class","inputbox flex flex-1 bg-primary mt-auto mx-auto mb-3 relative"),i(c,"class","inputbox-container w-full flex justify-center items-center bg-primary"),i(n,"class","h-screen flex justify-stretch flex-col bg-secondary text-black/80 height-manager"),i(p,"class","bg-primary overflow-hidden")},m(S,G){L(S,e,G),m(e,t),L(S,a,G),P&&P.m(S,G),L(S,r,G),L(S,p,G),m(p,n),Te(u,n,null),m(n,g),m(n,w),B[_].m(w,null),s[31](w),m(n,T),m(n,c),m(c,h),m(h,f),s[32](f),Ee(f,s[0]),m(h,E),m(h,I),m(I,A),m(A,C),Y.m(C,null),V=!0,f.focus(),H||(Q=[z(f,"input",s[33]),z(f,"input",el),z(f,"keydown",s[12]),z(C,"click",s[34])],H=!0)},p(S,G){(!V||G[0]&256)&&l!==(l=S[8]("app.title")+"")&&X(t,l),S[9]?P?(P.p(S,G),G[0]&512&&j(P,1)):(P=Je(),P.c(),j(P,1),P.m(r.parentNode,r)):P&&(pe(),Z(P,1,1,()=>{P=null}),de());const oe={};!o&&G[0]&16&&(o=!0,oe.conversation_title=S[4],ct(()=>o=!1)),u.$set(oe);let $=_;_=R(S),_===$?B[_].p(S,G):(pe(),Z(B[$],1,1,()=>{B[$]=null}),de(),y=B[_],y?y.p(S,G):(y=B[_]=ee[_](S),y.c()),j(y,1),y.m(w,null)),(!V||G[0]&256&&M!==(M=S[8]("app.textareaPlaceholder")))&&i(f,"placeholder",M),G[0]&1&&Ee(f,S[0]),te!==(te=ne(S,G))&&(Y.d(1),Y=te(S),Y&&(Y.c(),Y.m(C,null))),(!V||G[0]&1025&&q!==(q=!S[10]&&!S[0].trim().length))&&(C.disabled=q)},i(S){V||(j(P),j(u.$$.fragment,S),j(y),V=!0)},o(S){Z(P),Z(u.$$.fragment,S),Z(y),V=!1},d(S){S&&(d(e),d(a),d(r),d(p)),P&&P.d(S),De(u),B[_].d(),s[31](null),s[32](null),Y.d(),H=!1,me(Q)}}}const xe=300;function nt(s){s.target.style.height="inherit";const e=window.getComputedStyle(s.target),l=parseInt(e.getPropertyValue("border-top-width"),10)+s.target.scrollHeight+parseInt(e.getPropertyValue("border-bottom-width"),10),t=Math.min(l,xe);s.target.style.height=`${t}px`,t>=xe&&(s.target.scrollTop=s.target.scrollHeight)}function el(s){nt(s)}function tl(){console.log()}function ll(s,e,l){let t,a,r,p;_e(s,ie,b=>l(7,t=b)),_e(s,at,b=>l(8,a=b)),_e(s,rt,b=>l(9,r=b)),_e(s,bt,b=>l(10,p=b));const n={code:vt,em:kt,list:wt,listitem:Et,paragraph:yt,html:It};mt.setOptions({highlight(b,K){return Ne.getLanguage(K)?Ne.highlight(K,b).value:Ne.highlightAuto(b).value},langPrefix:"hljs language-"});let u,o="",g,w,_,y="",T=null,c="",h=null,f=!1;function M(){if(!_)return;const b={childList:!0,subtree:!0,characterData:!0};h=new MutationObserver((K,ae)=>{E()}),h.observe(_,b)}ut(async()=>{await St(),f=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),M(),u=new URLSearchParams(window.location.search).get("aisearch_q"),u&&(l(0,o=u),C()),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".message-display h1, .message-display h2, .message-display h3, .message-display h4, .message-display h5, .message-display h6").forEach(re=>{const Ae=re.textContent+"...";re.setAttribute("data-text",Ae)})});let K=localStorage.getItem("sendkey")||"Enter",ae=localStorage.getItem("linebreakkey")||"Shift+Enter",ke=localStorage.getItem("search_messages"),Ce=ke!==null?JSON.parse(ke):[];Pe.set(K),Pe.subscribe(le=>{localStorage.setItem("sendkey",le)}),Be.set(ae),Be.subscribe(le=>{localStorage.setItem("linebreakkey",le)}),ie.set(Ce),ie.subscribe(le=>{localStorage.setItem("search_messages",JSON.stringify(le))});const Le=localStorage.getItem("locale")||Tt()||"en";He.set(Le),He.subscribe(le=>{localStorage.setItem("locale",le)})}),ft(()=>{h&&(h.disconnect(),h=null),Dt()});function E(){_&&_.scrollHeight-_.scrollTop-150<=_.clientHeight&&l(3,_.scrollTop=_.scrollHeight,_)}const I={Enter:"001","Shift+Enter":"011","Ctrl+Enter":"101"};function A(b){let K=parseInt(I[fe(Pe)],2),ae=parseInt(I[fe(Be)],2),ke=parseInt(b.key==="Enter"?"001":"000",2),Ce=parseInt(b.shiftKey?"010":"000",2),le=parseInt(b.ctrlKey?"100":"000",2)|Ce|ke;if(!(K^le)&&!f&&(b.preventDefault(),C()),!(ae^le)||b.key==="Enter"&&f){b.preventDefault();const re=this,Ve=re.selectionStart,Ae=re.selectionEnd;re.value=re.value.substring(0,Ve)+`
`+re.value.substring(Ae),re.selectionStart=re.selectionEnd=Ve+1}}function C(){Mt(o),l(0,o=""),l(1,g.style.height="6rem",g)}function N(){_&&l(3,_.scrollTop=_.scrollHeight,_)}let q=0;dt(()=>{const b=t.length||0;b>q&&N(),q=b});function V(b){l(5,T=b),l(6,c=fe(ie)[b].content)}function H(b){Oe(fe(ie)[b-1].content,b)}function Q(){l(5,T=null),l(6,c=""),l(2,w.style.height="96px",w)}function P(b){Oe(c,b+1),Q()}function x(b){let K=t[b];K.isLiked=!0,K.isDisliked=!1;let ae=fe(ie);ae[b]=K,ie.set(ae)}function se(b){let K=t[b];K.isLiked=!1,K.isDisliked=!0;let ae=fe(ie);ae[b]=K,ie.set(ae)}function ee(b){y=b,l(4,y)}function B(b){we[b?"unshift":"push"](()=>{w=b,l(2,w)})}function R(){c=this.value,l(6,c)}const ne=()=>Q(),te=b=>P(b),Y=b=>Ct(b.content),S=b=>H(b),G=b=>Vt(b),oe=b=>V(b),$=b=>x(b),ge=b=>se(b);function be(b){we[b?"unshift":"push"](()=>{_=b,l(3,_)})}function ue(b){we[b?"unshift":"push"](()=>{g=b,l(1,g)})}function ve(){o=this.value,l(0,o)}return[o,g,w,_,y,T,c,t,a,r,p,n,A,C,V,H,Q,P,x,se,ee,B,R,ne,te,Y,S,G,oe,$,ge,be,ue,ve,()=>{p?At():C()}]}class il extends tt{constructor(e){super(),lt(this,e,ll,xt,et,{},null,[-1,-1])}}export{il as component};
