import{s as H,h as v,j as C,e as D,N as J,k as w,l as Q,d as p,m as I,E as h,z as k,i as E,B as L,o as W,w as G,x as N,y as K,G as B,A as F,O as U,c as X,u as Y,g as Z,a as x}from"../chunks/BdsHDvUS.js";import{S as $,i as ee,t as b,a as g,c as j,h as z,g as O}from"../chunks/B-JHVf8W.js";import{g as te}from"../chunks/D0QH3NT1.js";import{w as re,o as P,p as V,q as A}from"../chunks/dZh1jJNX.js";import{i as se}from"../chunks/CWxULtAF.js";import{c as ie,g as oe}from"../chunks/DhhvTVN_.js";import{f as T}from"../chunks/BsUhWRuj.js";const ae=!0,be=Object.freeze(Object.defineProperty({__proto__:null,prerender:ae},Symbol.toStringTag,{value:"Module"}));async function le(){try{let a=await ie()("https://api.uugpt.com/site_version",{method:"GET",credentials:"include"});return a.ok?await a.json():1}catch{return 1}}const{document:S}=te;function M(a){let t,o,r,e,l;return{c(){t=v("div"),o=v("span"),r=G(a[2]),this.h()},l(s){t=w(s,"DIV",{class:!0,role:!0,style:!0});var f=N(t);o=w(f,"SPAN",{class:!0});var _=N(o);r=K(_,a[2]),_.forEach(p),f.forEach(p),this.h()},h(){h(o,"class","block sm:inline"),h(t,"class","z-50 fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-md transition"),h(t,"role","alert"),B(t,"z-index","2000")},m(s,f){E(s,t,f),k(t,o),k(o,r),l=!0},p(s,f){(!l||f&4)&&F(r,s[2])},i(s){l||(s&&U(()=>{l&&(e||(e=z(t,T,{y:20,duration:500},!0)),e.run(1))}),l=!0)},o(s){s&&(e||(e=z(t,T,{y:20,duration:500},!1)),e.run(0)),l=!1},d(s){s&&p(t),s&&e&&e.end()}}}function q(a){let t,o,r,e,l;return{c(){t=v("div"),o=v("span"),r=G(a[2]),this.h()},l(s){t=w(s,"DIV",{class:!0,role:!0,style:!0});var f=N(t);o=w(f,"SPAN",{class:!0});var _=N(o);r=K(_,a[2]),_.forEach(p),f.forEach(p),this.h()},h(){h(o,"class","block sm:inline"),h(t,"class","z-50 fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-md"),h(t,"role","alert"),B(t,"z-index","2000")},m(s,f){E(s,t,f),k(t,o),k(o,r),l=!0},p(s,f){(!l||f&4)&&F(r,s[2])},i(s){l||(s&&U(()=>{l&&(e||(e=z(t,T,{y:20,duration:500},!0)),e.run(1))}),l=!0)},o(s){s&&(e||(e=z(t,T,{y:20,duration:500},!1)),e.run(0)),l=!1},d(s){s&&p(t),s&&e&&e.end()}}}function R(a){let t;const o=a[5].default,r=X(o,a,a[4],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,l){r&&r.m(e,l),t=!0},p(e,l){r&&r.p&&(!t||l&16)&&Y(r,o,e,e[4],t?x(o,e[4],l,null):Z(e[4]),null)},i(e){t||(b(r,e),t=!0)},o(e){g(r,e),t=!1},d(e){r&&r.d(e)}}}function ne(a){let t,o,r,e,l=`// 在 DOM 加载时立即监听\r
    window.addEventListener('beforeinstallprompt', (e) => {\r
      e.preventDefault();\r
      window.self_promp = e;\r
    });`,s,f,_,n,y,u=a[1]&&M(a),c=a[3]&&q(a),d=a[0]&&R(a);return{c(){t=v("link"),o=v("meta"),r=v("link"),e=v("script"),e.textContent=l,s=C(),u&&u.c(),f=C(),c&&c.c(),_=C(),d&&d.c(),n=D(),this.h()},l(i){const m=J("svelte-oqelg5",S.head);t=w(m,"LINK",{rel:!0,href:!0}),o=w(m,"META",{name:!0,content:!0}),r=w(m,"LINK",{rel:!0,href:!0,type:!0}),e=w(m,"SCRIPT",{"data-svelte-h":!0}),Q(e)!=="svelte-14rytc4"&&(e.textContent=l),m.forEach(p),s=I(i),u&&u.l(i),f=I(i),c&&c.l(i),_=I(i),d&&d.l(i),n=D(),this.h()},h(){h(t,"rel","manifest"),h(t,"href","/manifest.json?v=v1.0.2"),h(o,"name","theme-color"),h(o,"content","#e5e7eb"),h(r,"rel","icon"),h(r,"href","/favicon.ico"),h(r,"type","image/x-icon")},m(i,m){k(S.head,t),k(S.head,o),k(S.head,r),k(S.head,e),E(i,s,m),u&&u.m(i,m),E(i,f,m),c&&c.m(i,m),E(i,_,m),d&&d.m(i,m),E(i,n,m),y=!0},p(i,[m]){i[1]?u?(u.p(i,m),m&2&&b(u,1)):(u=M(i),u.c(),b(u,1),u.m(f.parentNode,f)):u&&(O(),g(u,1,1,()=>{u=null}),j()),i[3]?c?(c.p(i,m),m&8&&b(c,1)):(c=q(i),c.c(),b(c,1),c.m(_.parentNode,_)):c&&(O(),g(c,1,1,()=>{c=null}),j()),i[0]?d?(d.p(i,m),m&1&&b(d,1)):(d=R(i),d.c(),b(d,1),d.m(n.parentNode,n)):d&&(O(),g(d,1,1,()=>{d=null}),j())},i(i){y||(b(u),b(c),b(d),y=!0)},o(i){g(u),g(c),g(d),y=!1},d(i){i&&(p(s),p(f),p(_),p(n)),p(t),p(o),p(r),p(e),u&&u.d(i),c&&c.d(i),d&&d.d(i)}}}function fe(a,t,o){let r,e,l;L(a,P,n=>o(1,r=n)),L(a,V,n=>o(2,e=n)),L(a,A,n=>o(3,l=n));let{$$slots:s={},$$scope:f}=t,_=!1;return W(async()=>{let n=await le();console.log(n);let y=oe("version");if(y||(document.cookie="version="+n+"; path=/"),y!=n){let u=new URL(window.location.href);u.searchParams.set("v",n),window.location.href=u.toString()}await se(),await re(),o(0,_=!0)}),P.subscribe(n=>{n&&setTimeout(()=>{P.set(!1),V.set("")},5e3)}),A.subscribe(n=>{n&&setTimeout(()=>{A.set(!1),V.set("")},5e3)}),a.$$set=n=>{"$$scope"in n&&o(4,f=n.$$scope)},[_,r,e,l,f,s]}class ve extends ${constructor(t){super(),ee(this,t,fe,ne,H,{})}}export{ve as component,be as universal};
