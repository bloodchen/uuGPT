import{g as d,c as h,o as b,a as p,n as k,ap as i,ao as m,K as n,O as o,d as y,e as S,D as w,L as v}from"./index-2hagrbmf.js";const N=["width","height"],I={__name:"IconLoading",props:{size:{type:[Number,String],default:20},className:{type:String,default:""}},setup(e){const s=e,r=d(()=>{const{size:a}=s;return typeof a=="string"&&isNaN(parseFloat(a))?a:`${(typeof a=="string"?parseFloat(a):a)/16}rem`});return(a,t)=>(b(),h("svg",{width:r.value,height:r.value,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:k([e.className,"animate-spin"])},[...t[0]||(t[0]=[p("path",{d:"M512 85.333333c235.648 0 426.666667 191.018667 426.666667 426.666667s-191.018667 426.666667-426.666667 426.666667S85.333333 747.648 85.333333 512 276.352 85.333333 512 85.333333z m0 128a298.666667 298.666667 0 1 0 0 597.333334 298.666667 298.666667 0 0 0 0-597.333334z","fill-opacity":".2",fill:"currentColor"},null,-1),p("path",{d:"M813.696 813.696c166.613333-166.613333 166.613333-436.778667 0-603.392-166.613333-166.613333-436.778667-166.613333-603.392 0A64 64 0 0 0 300.8 300.8a298.666667 298.666667 0 1 1 422.4 422.4 64 64 0 0 0 90.496 90.496z",fill:"currentColor"},null,-1)])],10,N))}};function P(e,s,r,a){return i.post("/pay/createPaymentUrl",{plan:e,success_url:s,cancel_url:r,lang:a})}function T(){return i.get("/pay/plans")}function x(){return i.get("/pay/cancelPlan")}function C(){return i.get("/ai/limit/")}let u=null,g=null,l=null;function c(){return u||(u=y(),g=S(),l=w(),v()),{globalParamentStore:u,userStore:g,chatStore:l}}async function _(){c();try{let e=await T();l.plansInfo=e}catch(e){if(e.type==="api"){const s=m(e.message?.msg||e.message,n.global.t);o.error(s)}else o.error(n.global.t("ERR.CONNECTION_FAILED",{default:"Connection failed"}))}}async function E(){c();try{let e=await x();const s=n.global.t("pricing.cancelPlanSucces");return o.success(s),e}catch(e){return e.type==="api"&&o.error(n.global.t("pricing.cancelPlanFailed")),Promise.reject(e)}}async function A(e,s,r,a){c();try{let t=await P(e,s,r,a);return window.location.href=t.url,t}catch(t){if(t.type==="api"){const f=m(t.message?.msg||t.message,n.global.t);o.error(f)}else o.error(n.global.t("ERR.CONNECTION_FAILED",{default:"Connection failed"}));return Promise.reject(t)}}async function L(){c();try{let e=await C();e=e.result,l.limitInfo={free:{did:e.free.did,cheapTokens:e.free.cheap?.tokens||0,normalTokens:e.free.normal?.tokens||0,expensiveTokens:e.free.expensive?.tokens||0,calls:e.free.calls},basic:{did:e.basic.did,cheapTokens:e.basic.cheap?.tokens||0,normalTokens:e.basic.normal?.tokens||0,expensiveTokens:e.basic.expensive?.tokens||0,calls:e.basic.calls},pro:{did:e.pro.did,cheapTokens:e.pro.cheap?.tokens||0,normalTokens:e.pro.normal?.tokens||0,expensiveTokens:e.pro.expensive?.tokens||0,calls:e.pro.calls}}}catch(e){return Promise.reject(e)}}export{I as _,_ as a,E as c,L as g,A as s};
