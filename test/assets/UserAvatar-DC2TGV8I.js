import{g as u,c,o as i,a as p,n as _,_ as b,t as U,l as w,k as z,A as g,f as h,q as k,h as x,x as S,j as A,aX as L,aY as C}from"./index-BgtbzXZd.js";const N=["width","height"],B={__name:"IconUserDefault",props:{size:{type:[Number,String],default:24},className:{type:String,default:""}},setup(l){const t=l,e=u(()=>{const{size:a}=t;return typeof a=="string"&&isNaN(parseFloat(a))?a:`${(typeof a=="string"?parseFloat(a):a)/16}rem`});return(a,s)=>(i(),c("svg",{width:e.value,height:e.value,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:_(l.className)},[...s[0]||(s[0]=[p("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],10,N))}},E={viewBox:"0 0 60 60",xmlns:"http://www.w3.org/2000/svg",class:"rounded-full"},I=["fill"],R={key:0,x:"30",y:"30","font-size":"30","font-family":"system-ui, -apple-system, sans-serif","font-weight":"500","text-anchor":"middle","dominant-baseline":"central",fill:"white",class:"select-none"},$={key:1,transform:"translate(18, 18)",fill:"white"},j={__name:"DefaultAvatar",props:{email:{type:String,required:!0},size:{type:String,default:"2rem"}},setup(l){const t=["#dc2626","#ef4444","#f87171","#ea580c","#f97316","#fb923c","#d97706","#f59e0b","#fbbf24","#ca8a04","#eab308","#65a30d","#84cc16","#a3e635","#16a34a","#22c55e","#4ade80","#059669","#10b981","#34d399","#0891b2","#06b6d4","#22d3ee","#0284c7","#0ea5e9","#38bdf8","#2563eb","#3b82f6","#60a5fa","#4f46e5","#6366f1","#818cf8","#7c3aed","#8b5cf6","#a78bfa","#9333ea","#a855f7","#c084fc","#c026d3","#d946ef","#e879f9","#db2777","#ec4899","#f472b6","#e11d48","#f43f5e","#fb7185","#475569","#64748b","#4b5563","#6b7280","#52525b","#71717a","#525252","#737373","#57534e","#78716c","#1e293b","#374151","#44403c","#365314","#166534","#164e63","#1e40af","#5b21b6","#86198f","#be185d"],e=l,a=u(()=>e.email&&e.email.trim()!==""),s=u(()=>a.value?e.email.charAt(0).toUpperCase():""),f=u(()=>d(e.email)),v=u(()=>({width:e.size,height:e.size}));function d(n){if(!n||n.trim()==="")return"#6b7280";let r=0;for(let m=0;m<n.length;m++){const y=n.charCodeAt(m);r=(r<<5)-r+y,r=r&r}r=Math.abs(r);const o=r%t.length;return t[o]}return(n,r)=>(i(),c("div",{class:"default-avatar",style:g(v.value)},[(i(),c("svg",E,[p("circle",{cx:"30",cy:"30",r:"30",fill:f.value},null,8,I),a.value?(i(),c("text",R,U(s.value),1)):(i(),c("g",$,[w(z(B))]))]))],4))}},D=b(j,[["__scopeId","data-v-2046f392"]]),M=["src","alt"],q={__name:"UserAvatar",props:{avatarUrl:{type:String,default:""},email:{type:String,required:!0},size:{type:String,default:"2rem"}},setup(l){const t=l,e=h(null),a=h(!1),s=h(""),f=u(()=>({width:t.size,height:t.size,flexShrink:0}));function v(){a.value=!0,e.value&&e.value.startsWith("blob:")&&URL.revokeObjectURL(e.value),e.value=null}function d(){a.value=!1}async function n(){if(!t.avatarUrl||t.avatarUrl===""){e.value=null,a.value=!1;return}const r=s.value;if(t.avatarUrl!==r){e.value&&e.value.startsWith("blob:")&&URL.revokeObjectURL(e.value);try{const o=await L(t.avatarUrl,r);e.value=o,a.value=!1,s.value=t.avatarUrl}catch{a.value=!0,e.value=null,s.value=t.avatarUrl}}else try{const o=await C(t.avatarUrl);e.value=o,a.value=!1}catch{a.value=!0,e.value=null}}return k(()=>t.avatarUrl,()=>{n()},{immediate:!0}),x(()=>{n()}),S(()=>{e.value&&e.value.startsWith("blob:")&&URL.revokeObjectURL(e.value)}),(r,o)=>(i(),c("div",{class:"user-avatar-wrapper",style:g(f.value)},[e.value&&!a.value?(i(),c("img",{key:0,src:e.value,alt:`${l.email} avatar`,class:"user-avatar-img",onError:v,onLoad:d},null,40,M)):(i(),A(D,{key:1,email:l.email,size:l.size},null,8,["email","size"]))],4))}},O=b(q,[["__scopeId","data-v-d51fb6f6"]]);export{O as U,B as _};
